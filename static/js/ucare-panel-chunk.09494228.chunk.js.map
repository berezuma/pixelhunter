{"version":3,"sources":["../node_modules/@uploadcare/react-widget/dist/esm/dialog-897634be.js"],"names":["merge","state","newState","_objectSpread2","containerStyles","height","display","flexDirection","alignItems","justifyContent","Progress","_ref","hidden","value","ref","useRef","renderer","useEffect","current","uploadcare","Circle","setValue","React","createElement","useDialog","props","initial","_useState","opened","file","progress","useReducer","_useState2","_slicedToArray","setState","customTabs","tabsCss","locale","localePluralize","localeTranslations","useDeepEffect","window","UPLOADCARE_LOCALE","UPLOADCARE_LOCALE_PLURALIZE","UPLOADCARE_LOCALE_TRANSLATIONS","useCustomTabs","panelContainer","panelInstance","indexOf","addUrl","addStyle","reject","openPanel","fileFrom","uuid","done","Dialog","_useDialog","_useDialog2","_useDialog2$","containerRef","readyState","progressState","id","style","className","onClick","sourse"],"mappings":"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","file":"static/js/ucare-panel-chunk.09494228.chunk.js","sourcesContent":["import { c as _objectSpread2, b as _slicedToArray } from './index-c16682ef.js';\nimport React, { useReducer, useRef, useEffect } from 'react';\nimport uploadcare from 'uploadcare-widget';\nimport { a as useDeepEffect, u as useCustomTabs } from './use-deep-effect-514ff322.js';\nimport 'react-fast-compare';\nimport '@uploadcare/client-suspense';\n\nvar merge = function merge(state, newState) {\n  return _objectSpread2(_objectSpread2({}, state), newState);\n};\n\nvar useState = function useState(initial) {\n  return useReducer(merge, initial || {});\n};\n\nvar containerStyles = {\n  height: '500px',\n  display: 'flex',\n  flexDirection: 'column',\n  alignItems: 'center',\n  justifyContent: 'center'\n};\n\nvar Progress = function Progress(_ref) {\n  var hidden = _ref.hidden,\n      value = _ref.value;\n  var ref = useRef(null);\n  var renderer = useRef(null);\n  useEffect(function () {\n    renderer.current = new uploadcare.Circle(ref.current).renderer;\n  }, []);\n  useEffect(function () {\n    renderer.current.setValue(value);\n  }, [value]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    hidden: hidden,\n    ref: ref\n  });\n};\n\nvar useDialog = function useDialog(props, uploadcare) {\n  var _useState = useState({\n    opened: true,\n    file: null,\n    progress: null\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      state = _useState2[0],\n      setState = _useState2[1];\n\n  var customTabs = props.customTabs,\n      tabsCss = props.tabsCss,\n      locale = props.locale,\n      localePluralize = props.localePluralize,\n      localeTranslations = props.localeTranslations;\n  useDeepEffect(function () {\n    if (locale) window.UPLOADCARE_LOCALE = locale;\n    if (localePluralize) window.UPLOADCARE_LOCALE_PLURALIZE = localePluralize;\n\n    if (localeTranslations) {\n      window.UPLOADCARE_LOCALE_TRANSLATIONS = localeTranslations;\n    }\n\n    return function () {\n      if (locale) delete window.UPLOADCARE_LOCALE;\n      if (localePluralize) delete window.UPLOADCARE_LOCALE_PLURALIZE;\n      if (localeTranslations) delete window.UPLOADCARE_LOCALE_TRANSLATIONS;\n    };\n  }, [locale, localePluralize, localeTranslations]);\n  useCustomTabs(customTabs, uploadcare);\n  var panelContainer = useRef(null);\n  var panelInstance = useRef(null);\n  useEffect(function () {\n    if (state.opened) {\n      if (uploadcare && tabsCss && typeof tabsCss === 'string') {\n        if (tabsCss.indexOf('https://') === 0) {\n          uploadcare.tabsCss.addUrl(tabsCss);\n        } else {\n          uploadcare.tabsCss.addStyle(tabsCss);\n        }\n      }\n\n      panelInstance.current && panelInstance.current.reject();\n      panelInstance.current = uploadcare.openPanel(panelContainer.current, state.file ? uploadcare.fileFrom('uploaded', state.file.uuid, props) : null, props);\n      setState({\n        file: null\n      });\n      panelInstance.current.done(function (file) {\n        setState({\n          opened: false\n        });\n        file.progress(function (state) {\n          return setState({\n            progress: state.progress\n          });\n        });\n        file.done(function (file) {\n          return setState({\n            file: file\n          });\n        });\n      });\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [uploadcare, props, setState, state.opened]);\n  useEffect(function () {\n    return function () {\n      return panelInstance.current && panelInstance.current.reject();\n    };\n  }, []);\n  return [state, setState, panelContainer];\n};\n\nvar Dialog = function Dialog(props) {\n  var _useDialog = useDialog(props, uploadcare),\n      _useDialog2 = _slicedToArray(_useDialog, 3),\n      _useDialog2$ = _useDialog2[0],\n      opened = _useDialog2$.opened,\n      file = _useDialog2$.file,\n      progress = _useDialog2$.progress,\n      setState = _useDialog2[1],\n      containerRef = _useDialog2[2];\n\n  var readyState = file && !opened;\n  var progressState = !file && !opened && progress !== null;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    id: props.id,\n    style: containerStyles\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    ref: containerRef\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    hidden: !readyState\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"uploadcare--button uploadcare--button_primary\",\n    onClick: function onClick() {\n      return setState({\n        opened: true,\n        sourse: 'natural'\n      });\n    }\n  }, \"Open panel\")), /*#__PURE__*/React.createElement(\"span\", {\n    hidden: !readyState\n  }, \"File uuid: \"), /*#__PURE__*/React.createElement(\"span\", {\n    hidden: !readyState\n  }, file && file.uuid), /*#__PURE__*/React.createElement(Progress, {\n    hidden: !progressState,\n    value: progress\n  }));\n};\n\nexport default Dialog;\n"],"sourceRoot":""}